{% extends 'layout/master.html' %}
{% load static %}

{% block title %}{{title}}{% endblock %}

{% block layout %}
<!-- Layout wrapper: Start -->
<div class="layout-wrapper layout-content-navbar {{ is_menu|yesno:',layout-without-menu' }}">
<div class="layout-container">

    {% if is_menu %}
    <!-- Menu: Start -->
    {% include "parts/vertical_menu.html" %}
    <!-- Menu: End -->
    {% endif %}

    <!-- Layout page: Start -->
    <div class="layout-page">


    {% if is_navbar %}
    <!-- Navbar: Start -->
    {% include "parts/navbar.html" %}
    <!-- Navbar: End -->
    {% endif %}

<!-- ######################################################################### -->
    <!-- Content wrapper: Start -->

    <style>
        .app-chat{position:relative;height:calc(100vh - 11rem)}.layout-navbar-hidden .app-chat{height:calc(100vh - 7rem)}@media(min-width: 1200px){.layout-horizontal .app-chat{height:calc(100vh - 11rem - 4.2rem)}}@media(max-width: 992px){.app-chat .app-sidebar{z-index:4}}.app-chat .app-sidebar .sidebar-header{position:relative}.app-chat .app-sidebar .sidebar-header .close-sidebar{position:absolute;top:.5rem;right:.5rem}.app-chat .app-chat-contacts{position:absolute;left:calc(-21rem - 1rem);height:calc(100vh - 11rem);width:21rem;flex-basis:21rem;transition:all .25s ease}.layout-navbar-hidden .app-chat .app-chat-contacts{height:calc(100vh - 7rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-contacts{height:calc(100vh - 11rem - 4.2rem)}}@media(min-width: 992px){.app-chat .app-chat-contacts{position:static}}.app-chat .app-chat-contacts.show{left:0rem}.app-chat .app-chat-contacts .sidebar-body{height:calc(calc(100vh - 11rem) - 4rem)}.layout-navbar-hidden .app-chat .app-chat-contacts .sidebar-body{height:calc(calc(100vh - 7rem) - 4rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-contacts .sidebar-body{height:calc(calc(100vh - 11rem) - 3.5rem - 4.2rem)}}.app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.chat-contact-list-item{display:flex;justify-content:space-between;margin:.25rem .75rem;padding:.75rem .75rem;border-left:2px solid rgba(0,0,0,0);cursor:pointer;border-radius:.375rem}.app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.chat-contact-list-item a{width:100%}.app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.chat-contact-list-item .chat-contact-info{min-width:0}.app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.chat-contact-list-item .chat-contact-info .chat-contact-name{line-height:1.5}.app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.chat-contact-list-item small{white-space:nowrap}.app-chat .app-chat-sidebar-left{position:absolute;top:0;left:calc(-21rem - 1rem);width:21rem;height:calc(100vh - 11rem);opacity:0;z-index:5;transition:all .25s ease}.layout-navbar-hidden .app-chat .app-chat-sidebar-left{height:calc(100vh - 7rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-sidebar-left{height:calc(100vh - 11rem - 4.2rem)}}.app-chat .app-chat-sidebar-left.show{left:0;opacity:1}.app-chat .app-chat-sidebar-left .sidebar-body{height:calc(calc(100vh - 11rem) - 11rem)}.layout-navbar-hidden .app-chat .app-chat-sidebar-left .sidebar-body{height:calc(calc(100vh - 7rem) - 11rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-sidebar-left .sidebar-body{height:calc(calc(100vh - 11rem) - 10.9rem - 4.2rem)}}.app-chat .app-chat-history{position:relative;height:calc(100vh - 11rem);transition:all .25s ease}.layout-navbar-hidden .app-chat .app-chat-history{height:calc(100vh - 7rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-history{height:calc(100vh - 11rem - 4.2rem)}}.app-chat .app-chat-history .chat-history-header{padding:1rem 1.5rem}.app-chat .app-chat-history .chat-history-body{height:calc(100vh - 20.7rem);padding:2rem 1.5rem;overflow:hidden}.layout-navbar-hidden .app-chat .app-chat-history .chat-history-body{height:calc(100vh - 16.7rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-history .chat-history-body{height:calc(100vh - 20.7rem - 4.2rem)}}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message{display:flex;justify-content:flex-start}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message .chat-message-wrapper i::before{font-size:1rem}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message .chat-message-wrapper .chat-message-text{border-radius:.375rem;padding:.75rem 1rem}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message:not(.chat-message-right) .chat-message-text{border-top-left-radius:0}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right{justify-content:flex-end}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right .chat-message-text{border-top-right-radius:0}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right .user-avatar{margin-right:0rem;margin-left:1rem}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message .thumbnail{cursor:zoom-in}.app-chat .app-chat-history .chat-history-body .chat-history .chat-message:not(:last-child){margin-bottom:1rem}.app-chat .app-chat-history .chat-history-footer{padding:.312rem 1rem;margin:0 1.5rem;border-radius:.375rem}.app-chat .app-chat-history .chat-history-footer .form-control{border-color:rgba(0,0,0,0)}.app-chat .app-chat-history .chat-history-footer .form-control:hover,.app-chat .app-chat-history .chat-history-footer .form-control:focus{border-color:rgba(0,0,0,0) !important}.app-chat .app-chat-sidebar-right{position:absolute;top:0;right:calc(-21rem - 1rem);width:21rem;height:calc(100vh - 11rem);opacity:0;z-index:5;transition:all .25s ease}.layout-navbar-hidden .app-chat .app-chat-sidebar-right{height:calc(100vh - 7rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-sidebar-right{height:calc(100vh - 11rem - 4.2rem)}}.app-chat .app-chat-sidebar-right.show{opacity:1;right:0}.app-chat .app-chat-sidebar-right .sidebar-body{height:calc(calc(100vh - 11rem) - 11.19rem)}.layout-navbar-hidden .app-chat .app-chat-sidebar-right .sidebar-body{height:calc(calc(100vh - 7rem) - 11.19rem)}@media(min-width: 1200px){.layout-horizontal .app-chat .app-chat-sidebar-right .sidebar-body{height:calc(calc(100vh - 11rem) - 11.1rem - 4.2rem)}}@media(max-width: 576px){.app-chat .app-chat-sidebar-right.show,.app-chat .app-chat-sidebar-left.show,.app-chat .app-chat-contacts.show{width:100%}}.light-style .app-chat .app-chat-contacts,.light-style .app-chat .app-chat-sidebar-left{background-color:#fff;box-shadow:0 0 0 1px rgba(58,53,65,.075)}.light-style .app-chat .app-chat-contacts .chat-actions .chat-search-input,.light-style .app-chat .app-chat-sidebar-left .chat-actions .chat-search-input{background-color:#f4f5fa}.light-style .app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.active,.light-style .app-chat .app-chat-sidebar-left .sidebar-body .chat-contact-list li.active{color:#fff}.light-style .app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.active h6,.light-style .app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.active .text-muted,.light-style .app-chat .app-chat-sidebar-left .sidebar-body .chat-contact-list li.active h6,.light-style .app-chat .app-chat-sidebar-left .sidebar-body .chat-contact-list li.active .text-muted{color:#fff !important}.light-style .app-chat .app-chat-history{background-color:#f7f7f7}.light-style .app-chat .app-chat-history .chat-history-wrapper{background-color:#f7f7f7}.light-style .app-chat .app-chat-history .chat-history-footer{background-color:#fff;box-shadow:0px 2px 1px -1px rgba(58,53,65,.2),0px 1px 1px rgba(58,53,65,.14),0px 1px 3px rgba(58,53,65,.12)}.light-style .app-chat .app-chat-history .chat-history-body .chat-history .chat-message .chat-message-text{background-color:#fff;box-shadow:0px 2px 1px -1px rgba(58,53,65,.2),0px 1px 1px rgba(58,53,65,.14),0px 1px 3px rgba(58,53,65,.12)}.light-style .app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right{justify-content:flex-end}.light-style .app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right .chat-message-text{color:#fff}.light-style .app-chat .app-chat-sidebar-right{background-color:#fff;box-shadow:16px 1px 45px 3px rgba(58,53,65,.5)}@media(max-width: 992px){.light-style .app-chat .app-chat-contacts .chat-actions .chat-search-input{background-color:#fff}}.dark-style .app-chat .app-chat-contacts,.dark-style .app-chat .app-chat-sidebar-left{background-color:#312d4b}.dark-style .app-chat .app-chat-contacts .chat-actions .chat-search-input,.dark-style .app-chat .app-chat-sidebar-left .chat-actions .chat-search-input{background-color:#28243d}.dark-style .app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.active,.dark-style .app-chat .app-chat-sidebar-left .sidebar-body .chat-contact-list li.active{color:#fff}.dark-style .app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.active h6,.dark-style .app-chat .app-chat-contacts .sidebar-body .chat-contact-list li.active .text-muted,.dark-style .app-chat .app-chat-sidebar-left .sidebar-body .chat-contact-list li.active h6,.dark-style .app-chat .app-chat-sidebar-left .sidebar-body .chat-contact-list li.active .text-muted{color:#fff !important}.dark-style .app-chat .app-chat-history{background-color:#383452}.dark-style .app-chat .app-chat-history .chat-history-wrapper{background-color:#383452}.dark-style .app-chat .app-chat-history .chat-history-footer{background-color:#312d4b;box-shadow:0px 2px 1px -1px rgba(19,17,32,.2),0px 1px 1px rgba(19,17,32,.14),0px 1px 3px rgba(19,17,32,.12)}.dark-style .app-chat .app-chat-history .chat-history-body .chat-history .chat-message .chat-message-text{background-color:#312d4b;box-shadow:0px 2px 1px -1px rgba(19,17,32,.2),0px 1px 1px rgba(19,17,32,.14),0px 1px 3px rgba(19,17,32,.12)}.dark-style .app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right{justify-content:flex-end}.dark-style .app-chat .app-chat-history .chat-history-body .chat-history .chat-message.chat-message-right .chat-message-text{color:#fff}.dark-style .app-chat .app-chat-sidebar-right{background-color:#312d4b}[dir=rtl] .app-chat .app-chat-sidebar-left,[dir=rtl] .app-chat .app-chat-contacts{right:calc(-21rem - 1rem);left:auto}[dir=rtl] .app-chat .app-chat-sidebar-left.show,[dir=rtl] .app-chat .app-chat-contacts.show{left:auto;right:0}[dir=rtl] .app-chat .app-chat-sidebar-right{left:calc(-21rem - 1rem);right:auto}[dir=rtl] .app-chat .app-chat-sidebar-right.show{left:0;right:auto}[dir=rtl] .app-chat .app-chat-history .chat-history-body .chat-history .chat .user-avatar{margin-left:1rem;margin-right:0}[dir=rtl] .app-chat .app-chat-history .chat-message:not(.chat-message-right) .chat-message-text{border-top-right-radius:0;border-top-left-radius:.375rem !important}[dir=rtl] .app-chat .app-chat-history .chat-message.chat-message-right .chat-message-text{border-top-left-radius:0;border-top-right-radius:.375rem !important}
    </style>
    <div class="content-wrapper">

        <div class="container-xxl flex-grow-1 container-p-y">
            <div class="app-chat card overflow-hidden">
                <div class="row g-0">


                    <div class="col app-chat-contacts app-sidebar flex-grow-0 overflow-hidden border-end" id="app-chat-contacts">
                        <div class="sidebar-header py-3 px-4 border-bottom">
                            <div class="d-flex align-items-center me-3 me-lg-0">
                                <div class="flex-shrink-0 avatar avatar-online me-3" data-bs-toggle="sidebar" data-overlay="app-overlay-ex" data-target="#app-chat-sidebar-left">
                                    <img class="user-avatar rounded-circle cursor-pointer" src="{% static 'img/avatars/1.png' %}" alt="Avatar">
                                </div>
                                <div class="flex-grow-1 input-group input-group-merge rounded-pill">
                                    <span class="input-group-text" id="basic-addon-search31"><i class="mdi mdi-magnify lh-1"></i></span>
                                    <input type="text" class="form-control chat-search-input" placeholder="Search..." aria-label="Search..." aria-describedby="basic-addon-search31">
                                </div>
                            </div>
                            <i class="mdi mdi-close mdi-20px cursor-pointer position-absolute top-0 end-0 mt-2 me-2 fs-4 d-lg-none d-block" data-overlay="" data-bs-toggle="sidebar" data-target="#app-chat-contacts"></i>
                        </div>


                        <div class="sidebar-body ps ps--active-y" style="overflow-y: auto;">
                            <!-- Chats -->
                            <ul class="list-unstyled chat-contact-list" id="chat-list">
                                <li class="chat-contact-list-item chat-contact-list-item-title">
                                    <h5 class="text-primary mb-0">Chats</h5>
                                </li>
                                <li class="chat-contact-list-item chat-list-item-0 d-none">
                                    <h6 class="text-muted mb-0">No Chats Found</h6>
                                </li>
 

                                {% for message in messages %}
                                    <li class="chat-contact-list-item">
                                        <a class="d-flex align-items-center">
                                        <div class="flex-shrink-0 avatar avatar-online">
                                            <img src="{% static 'img/avatars/1.png' %}" alt="Avatar" class="rounded-circle">
                                        </div>
                                        <div class="chat-contact-info flex-grow-1 ms-3">
                                            <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="chat-contact-name text-truncate fw-normal m-0">{{message.destination}}/{{message.inquiry.sp}}</h6>
                                            <small class="text-muted">{{message.date}}</small>
                                            </div>
                                            <p class="chat-contact-status text-truncate mb-0 text-muted"><small>about <strong>{{message.inquiry.customer}}'s</strong> inquiry</small> {{message.last_content}}</p>
                                        </div>
                                        </a>
                                    </li>
                                    <!--<li class="chat-contact-list-item active">-->
                                {% endfor %}
                            </ul>
                        </div>
                        <script>
                            // Initialize Perfect Scrollbar for elements with the 'ps' class
                            const containers = document.querySelectorAll('.ps');
                            containers.forEach(container => {
                            new PerfectScrollbar(container);
                            });
                        </script>
                    
                </div>
            </div>
        </div>



        


        <!-- Content: Start -->
        {% if is_flex %}
        <div class="{{container_class}} d-flex align-items-stretch flex-grow-1 p-0">
        {% else %}
        <div class="{{container_class}} flex-grow-1 container-p-y">
            {% endif %}
            {% block content %}
            {% endblock content %}

        </div>
        <!-- / Content: End -->

        <!--{% if is_footer %}
            Footer: Start 
        {% include "parts/footer.html" %}
            Footer: End 
        {% endif %}-->

        <div class="content-backdrop fade"></div>
        </div>
        <!--/ Content wrapper: End -->
    </div>
    <!-- / Layout page: End -->
    </div>

    {% if is_menu %}
    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
    {% endif %}
    <!-- Drag Target Area To SlideIn Menu On Small Screens -->
    <div class="drag-target"></div>
</div>
<!-- Layout wrapper: End -->
{% endblock layout %}
